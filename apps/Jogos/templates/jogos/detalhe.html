{% extends 'base.html' %}

{% block conteudo %}

<aside class="detalhe-jogo">

    {% if jogo.imagem %}
        <img src="{{ jogo.imagem.url }}" alt="{{ jogo.nome }}" class="imagem-jogo">
    {% endif %}

    <div class="texto-aside">
        <h1>{{ jogo.nome }}</h1>

        <p><strong>Descrição:</strong> {{ jogo.descricao }}</p>
        <p><strong>Plataforma:</strong> {{ jogo.plataforma }}</p>
        <p><strong>Data de Lançamento:</strong> {{ jogo.data_lancamento }}</p>
        <p><strong>Gênero:</strong> {{ jogo.genero.nome }}</p>

        <div class="acoes">
            {% if request.session.is_admin %}
                <a href="{% url 'jogos:editar' jogo.pk %}">Editar</a>
                <a href="{% url 'jogos:excluir' jogo.pk %}">Excluir</a>
            {% endif %}
            <a href="{% url 'jogos:lista' %}">Voltar</a>
        </div>
    </div>

</aside>

<hr>

<h2 class="h2">Reviews</h2>

{% if reviews %}
    {% for review in reviews %}
        <div class="review-card">
            <div class="review-header">
                {% if review.usuario.imagem %}
                    <img src="{{ review.usuario.imagem.url }}" class="foto-perfil">
                {% endif %}               
            </div>
            <strong>{{ review.usuario.nome_usuario }}</strong>
            <p>Nota: {{ review.nota }}</p>
            <p>{{ review.comentario }}</p>
            <small>{{ review.data }}</small>
            {% if request.session.usuario_id == review.usuario.id or request.session.is_admin %}
            <div class="acoes">
                <a href="{% url 'reviews:editar' review.pk %}">Editar</a>
                <a href="{% url 'reviews:excluir' review.pk %}">Excluir</a>
            </div>
            {% endif %}
        </div>
    {% endfor %}

{% else %}
        <div class="review-card">
            <p>Este jogo ainda não possui reviews.</p>
        </div>
    
{% endif %}

<div class="acoes-g">
    <div class="acoes-genero">
        <a href="{% url 'reviews:criar' jogo.pk %}">Adicionar Review</a>
    </div>
</div>

{% endblock %}
